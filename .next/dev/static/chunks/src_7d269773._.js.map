{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/chlgh/OneDrive/Desktop/bigstock/src/context/CartContext.tsx"],"sourcesContent":["'use client';\n\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport { CartItem, Product } from '../types';\n\ninterface CartContextType {\n  cart: CartItem[];\n  addToCart: (product: Product, quantity?: number, size?: string, color?: string, preventDrawer?: boolean) => void;\n  removeFromCart: (id: string) => void;\n  updateQuantity: (id: string, quantity: number) => void;\n  clearCart: () => void;\n  cartTotal: number;\n  cartCount: number;\n  isCartOpen: boolean;\n  setIsCartOpen: (isOpen: boolean) => void;\n  wishlist: string[];\n  toggleWishlist: (id: string) => void;\n}\n\nconst CartContext = createContext<CartContextType | undefined>(undefined);\n\nexport const CartProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  const [cart, setCart] = useState<CartItem[]>([]);\n  const [isCartOpen, setIsCartOpen] = useState(false);\n  const [wishlist, setWishlist] = useState<string[]>([]);\n\n  // Load from local storage\n  useEffect(() => {\n    const savedCart = localStorage.getItem('cart');\n    const savedWishlist = localStorage.getItem('wishlist');\n    if (savedCart) setCart(JSON.parse(savedCart));\n    if (savedWishlist) setWishlist(JSON.parse(savedWishlist));\n  }, []);\n\n  // Save to local storage\n  useEffect(() => {\n    localStorage.setItem('cart', JSON.stringify(cart));\n    localStorage.setItem('wishlist', JSON.stringify(wishlist));\n  }, [cart, wishlist]);\n\n  const addToCart = (product: Product, quantity = 1, size?: string, color?: string, preventDrawer = false) => {\n    setCart(prev => {\n      const existing = prev.find(item => item.id === product.id && item.selectedSize === size && item.selectedColor === color);\n      if (existing) {\n        return prev.map(item =>\n          (item.id === product.id && item.selectedSize === size && item.selectedColor === color)\n            ? { ...item, quantity: item.quantity + quantity }\n            : item\n        );\n      }\n      return [...prev, { ...product, quantity, selectedSize: size, selectedColor: color }];\n    });\n\n    if (!preventDrawer) {\n      setIsCartOpen(true);\n    }\n  };\n\n  const removeFromCart = (id: string) => {\n    setCart(prev => prev.filter(item => item.id !== id));\n  };\n\n  const updateQuantity = (id: string, quantity: number) => {\n    if (quantity < 1) return;\n    setCart(prev => prev.map(item => item.id === id ? { ...item, quantity } : item));\n  };\n\n  const clearCart = () => setCart([]);\n\n  const toggleWishlist = (id: string) => {\n    setWishlist(prev => prev.includes(id) ? prev.filter(pid => pid !== id) : [...prev, id]);\n  };\n\n  const cartTotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);\n  const cartCount = cart.reduce((sum, item) => sum + item.quantity, 0);\n\n  return (\n    <CartContext.Provider value={{\n      cart, addToCart, removeFromCart, updateQuantity, clearCart,\n      cartTotal, cartCount, isCartOpen, setIsCartOpen,\n      wishlist, toggleWishlist\n    }}>\n      {children}\n    </CartContext.Provider>\n  );\n};\n\nexport const useCart = () => {\n  const context = useContext(CartContext);\n  if (!context) throw new Error('useCart must be used within a CartProvider');\n  return context;\n};\n"],"names":[],"mappings":";;;;;;;AAEA;;;AAFA;;AAmBA,MAAM,4BAAc,IAAA,8KAAa,EAA8B;AAExD,MAAM,eAAwD,CAAC,EAAE,QAAQ,EAAE;;IAChF,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,yKAAQ,EAAa,EAAE;IAC/C,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAC;IAC7C,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAW,EAAE;IAErD,0BAA0B;IAC1B,IAAA,0KAAS;kCAAC;YACR,MAAM,YAAY,aAAa,OAAO,CAAC;YACvC,MAAM,gBAAgB,aAAa,OAAO,CAAC;YAC3C,IAAI,WAAW,QAAQ,KAAK,KAAK,CAAC;YAClC,IAAI,eAAe,YAAY,KAAK,KAAK,CAAC;QAC5C;iCAAG,EAAE;IAEL,wBAAwB;IACxB,IAAA,0KAAS;kCAAC;YACR,aAAa,OAAO,CAAC,QAAQ,KAAK,SAAS,CAAC;YAC5C,aAAa,OAAO,CAAC,YAAY,KAAK,SAAS,CAAC;QAClD;iCAAG;QAAC;QAAM;KAAS;IAEnB,MAAM,YAAY,CAAC,SAAkB,WAAW,CAAC,EAAE,MAAe,OAAgB,gBAAgB,KAAK;QACrG,QAAQ,CAAA;YACN,MAAM,WAAW,KAAK,IAAI,CAAC,CAAA,OAAQ,KAAK,EAAE,KAAK,QAAQ,EAAE,IAAI,KAAK,YAAY,KAAK,QAAQ,KAAK,aAAa,KAAK;YAClH,IAAI,UAAU;gBACZ,OAAO,KAAK,GAAG,CAAC,CAAA,OACd,AAAC,KAAK,EAAE,KAAK,QAAQ,EAAE,IAAI,KAAK,YAAY,KAAK,QAAQ,KAAK,aAAa,KAAK,QAC5E;wBAAE,GAAG,IAAI;wBAAE,UAAU,KAAK,QAAQ,GAAG;oBAAS,IAC9C;YAER;YACA,OAAO;mBAAI;gBAAM;oBAAE,GAAG,OAAO;oBAAE;oBAAU,cAAc;oBAAM,eAAe;gBAAM;aAAE;QACtF;QAEA,IAAI,CAAC,eAAe;YAClB,cAAc;QAChB;IACF;IAEA,MAAM,iBAAiB,CAAC;QACtB,QAAQ,CAAA,OAAQ,KAAK,MAAM,CAAC,CAAA,OAAQ,KAAK,EAAE,KAAK;IAClD;IAEA,MAAM,iBAAiB,CAAC,IAAY;QAClC,IAAI,WAAW,GAAG;QAClB,QAAQ,CAAA,OAAQ,KAAK,GAAG,CAAC,CAAA,OAAQ,KAAK,EAAE,KAAK,KAAK;oBAAE,GAAG,IAAI;oBAAE;gBAAS,IAAI;IAC5E;IAEA,MAAM,YAAY,IAAM,QAAQ,EAAE;IAElC,MAAM,iBAAiB,CAAC;QACtB,YAAY,CAAA,OAAQ,KAAK,QAAQ,CAAC,MAAM,KAAK,MAAM,CAAC,CAAA,MAAO,QAAQ,MAAM;mBAAI;gBAAM;aAAG;IACxF;IAEA,MAAM,YAAY,KAAK,MAAM,CAAC,CAAC,KAAK,OAAS,MAAO,KAAK,KAAK,GAAG,KAAK,QAAQ,EAAG;IACjF,MAAM,YAAY,KAAK,MAAM,CAAC,CAAC,KAAK,OAAS,MAAM,KAAK,QAAQ,EAAE;IAElE,qBACE,6LAAC,YAAY,QAAQ;QAAC,OAAO;YAC3B;YAAM;YAAW;YAAgB;YAAgB;YACjD;YAAW;YAAW;YAAY;YAClC;YAAU;QACZ;kBACG;;;;;;AAGP;GAhEa;KAAA;AAkEN,MAAM,UAAU;;IACrB,MAAM,UAAU,IAAA,2KAAU,EAAC;IAC3B,IAAI,CAAC,SAAS,MAAM,IAAI,MAAM;IAC9B,OAAO;AACT;IAJa"}},
    {"offset": {"line": 122, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/chlgh/OneDrive/Desktop/bigstock/src/lib/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\n\nconst supabaseUrl = import.meta.env.VITE_SUPABASE_URL;\nconst supabaseAnonKey = import.meta.env.VITE_SUPABASE_ANON_KEY;\n\nif (!supabaseUrl || !supabaseAnonKey) {\n  console.warn('Missing Supabase environment variables. Please check your .env file or Vercel project settings.');\n}\n\nexport const supabase = createClient(\n  supabaseUrl || 'https://placeholder.supabase.co', \n  supabaseAnonKey || 'placeholder'\n);\n"],"names":[],"mappings":";;;;AAAA;;;;;;;AAEA,MAAM,cAAc,8BAAY,GAAG,CAAC,iBAAiB;AACrD,MAAM,kBAAkB,8BAAY,GAAG,CAAC,sBAAsB;AAE9D,IAAI,CAAC,eAAe,CAAC,iBAAiB;IACpC,QAAQ,IAAI,CAAC;AACf;AAEO,MAAM,WAAW,IAAA,iMAAY,EAClC,eAAe,mCACf,mBAAmB"}},
    {"offset": {"line": 146, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/chlgh/OneDrive/Desktop/bigstock/src/utils/slugify.ts"],"sourcesContent":["// Basic slugify for simple cases\nexport const slugify = (text: string): string => {\n  if (!text) return '';\n  return text\n    .toString()\n    .toLowerCase()\n    .trim()\n    .replace(/\\s+/g, '-')        // Replace spaces with -\n    .replace(/&/g, '-and-')      // Replace & with 'and'\n    .replace(/[^\\w\\-]+/g, '')    // Remove all non-word chars\n    .replace(/\\-\\-+/g, '-');     // Replace multiple - with single -\n};\n\n// Advanced unique slug generator based on specific business rules\nexport const generateUniqueSlug = (title: string, existingSlugs: string[]): string => {\n  if (!title) return '';\n\n  // Normalize: lowercase, remove special chars, split by space\n  const cleanTitle = title.toLowerCase().replace(/[^\\w\\s-]/g, '').trim();\n  const words = cleanTitle.split(/\\s+/).filter(w => w.length > 0);\n  \n  if (words.length === 0) return `product-${Date.now()}`;\n\n  // Rule 1: Take first 3 words (or fewer if title is short)\n  const limit = Math.min(words.length, 3);\n  let candidate = words.slice(0, limit).join('-');\n  \n  // Check uniqueness\n  if (!existingSlugs.includes(candidate)) {\n    return candidate;\n  }\n\n  // Rule 2: If exists, try taking 4 words (if available)\n  if (words.length >= 4) {\n    const candidate4 = words.slice(0, 4).join('-');\n    if (!existingSlugs.includes(candidate4)) {\n      return candidate4;\n    }\n    // If 4 words also exist, we will use the 4-word version as base for numbering\n    candidate = candidate4;\n  }\n\n  // Rule 3: Append number (1, 2, 3...) until unique\n  let counter = 1;\n  while (true) {\n    const numberedCandidate = `${candidate}-${counter}`;\n    if (!existingSlugs.includes(numberedCandidate)) {\n      return numberedCandidate;\n    }\n    counter++;\n  }\n};\n"],"names":[],"mappings":"AAAA,iCAAiC;;;;;;;AAC1B,MAAM,UAAU,CAAC;IACtB,IAAI,CAAC,MAAM,OAAO;IAClB,OAAO,KACJ,QAAQ,GACR,WAAW,GACX,IAAI,GACJ,OAAO,CAAC,QAAQ,KAAY,wBAAwB;KACpD,OAAO,CAAC,MAAM,SAAc,uBAAuB;KACnD,OAAO,CAAC,aAAa,IAAO,4BAA4B;KACxD,OAAO,CAAC,UAAU,MAAU,mCAAmC;AACpE;AAGO,MAAM,qBAAqB,CAAC,OAAe;IAChD,IAAI,CAAC,OAAO,OAAO;IAEnB,6DAA6D;IAC7D,MAAM,aAAa,MAAM,WAAW,GAAG,OAAO,CAAC,aAAa,IAAI,IAAI;IACpE,MAAM,QAAQ,WAAW,KAAK,CAAC,OAAO,MAAM,CAAC,CAAA,IAAK,EAAE,MAAM,GAAG;IAE7D,IAAI,MAAM,MAAM,KAAK,GAAG,OAAO,CAAC,QAAQ,EAAE,KAAK,GAAG,IAAI;IAEtD,0DAA0D;IAC1D,MAAM,QAAQ,KAAK,GAAG,CAAC,MAAM,MAAM,EAAE;IACrC,IAAI,YAAY,MAAM,KAAK,CAAC,GAAG,OAAO,IAAI,CAAC;IAE3C,mBAAmB;IACnB,IAAI,CAAC,cAAc,QAAQ,CAAC,YAAY;QACtC,OAAO;IACT;IAEA,uDAAuD;IACvD,IAAI,MAAM,MAAM,IAAI,GAAG;QACrB,MAAM,aAAa,MAAM,KAAK,CAAC,GAAG,GAAG,IAAI,CAAC;QAC1C,IAAI,CAAC,cAAc,QAAQ,CAAC,aAAa;YACvC,OAAO;QACT;QACA,8EAA8E;QAC9E,YAAY;IACd;IAEA,kDAAkD;IAClD,IAAI,UAAU;IACd,MAAO,KAAM;QACX,MAAM,oBAAoB,GAAG,UAAU,CAAC,EAAE,SAAS;QACnD,IAAI,CAAC,cAAc,QAAQ,CAAC,oBAAoB;YAC9C,OAAO;QACT;QACA;IACF;AACF"}},
    {"offset": {"line": 199, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/chlgh/OneDrive/Desktop/bigstock/src/context/DataContext.tsx"],"sourcesContent":["'use client';\n\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport { Product, Order, Category, OrderStatus } from '../types';\nimport { supabase } from '../lib/supabase';\nimport { generateUniqueSlug, slugify } from '../utils/slugify';\n\n// Initial Products for seeding (FRENCH)\nconst initialProducts: Product[] = [\n  {\n    id: '1',\n    name: 'Richelieu Oxford Cuir',\n    price: 189.00,\n    originalPrice: 240.00,\n    categories: ['Chaussures', 'Hommes'],\n    image: 'https://images.unsplash.com/photo-1614252235316-8c857d38b5f4?q=80&w=1000&auto=format&fit=crop',\n    images: ['https://images.unsplash.com/photo-1614252235316-8c857d38b5f4?q=80&w=1000&auto=format&fit=crop'],\n    shortDescription: 'Fabriqué à la main en cuir italien de première qualité.',\n    description: 'Ces chaussures Richelieu définissent la sophistication. Parfaites pour les occasions formelles.',\n    sizes: ['40', '41', '42', '43', '44'],\n    colors: ['Marron', 'Noir'],\n    isNew: true,\n    rating: 4.8,\n    reviews: 124,\n    stockQuantity: 50,\n    inStock: true,\n    tags: ['hommes', 'formel'],\n    isFeatured: true\n  },\n  {\n    id: '2',\n    name: 'Mocassin Daim Minimaliste',\n    price: 145.00,\n    categories: ['Chaussures', 'Hommes'],\n    image: 'https://images.unsplash.com/photo-1560343090-f0409e92791a?q=80&w=1000&auto=format&fit=crop',\n    images: ['https://images.unsplash.com/photo-1560343090-f0409e92791a?q=80&w=1000&auto=format&fit=crop'],\n    shortDescription: 'Le style sans effort rencontre le confort.',\n    description: 'Ces mocassins en daim disposent d\\'une semelle intérieure rembourrée pour un confort optimal.',\n    sizes: ['39', '40', '41', '42'],\n    colors: ['Beige', 'Bleu Marine'],\n    rating: 4.5,\n    reviews: 89,\n    stockQuantity: 30,\n    inStock: true,\n    tags: ['hommes', 'décontracté']\n  },\n  {\n    id: '3',\n    name: 'Manteau en Laine Minuit',\n    price: 350.00,\n    originalPrice: 450.00,\n    categories: ['Vestes', 'Femmes'],\n    image: 'https://images.unsplash.com/photo-1544022613-e87ca75a784a?q=80&w=1000&auto=format&fit=crop',\n    images: ['https://images.unsplash.com/photo-1544022613-e87ca75a784a?q=80&w=1000&auto=format&fit=crop'],\n    shortDescription: 'Une silhouette intemporelle taillée dans un mélange de laine luxueux.',\n    description: 'Restez au chaud avec style grâce à ce manteau en laine de haute qualité.',\n    sizes: ['S', 'M', 'L', 'XL'],\n    colors: ['Gris Anthracite', 'Noir'],\n    isNew: true,\n    rating: 4.9,\n    reviews: 56,\n    stockQuantity: 20,\n    inStock: true,\n    tags: ['femmes', 'hiver'],\n    isFeatured: true\n  },\n  {\n    id: '4',\n    name: 'Blouson Motard Cuir Vintage',\n    price: 299.00,\n    categories: ['Vestes', 'Hommes'],\n    image: 'https://images.unsplash.com/photo-1487222477894-8943e31ef7b2?q=80&w=1000&auto=format&fit=crop',\n    images: ['https://images.unsplash.com/photo-1487222477894-8943e31ef7b2?q=80&w=1000&auto=format&fit=crop'],\n    shortDescription: 'Robuste mais raffiné. Ce blouson développe une patine unique.',\n    description: 'Cuir véritable qui s\\'améliore avec l\\'âge. Un classique pour toute garde-robe.',\n    sizes: ['M', 'L', 'XL'],\n    colors: ['Marron'],\n    rating: 4.7,\n    reviews: 210,\n    stockQuantity: 15,\n    inStock: true,\n    tags: ['hommes', 'décontracté']\n  },\n  {\n    id: '5',\n    name: 'Papier Peint Damassé Victorien',\n    price: 85.00,\n    categories: ['Papier Peint'],\n    image: 'https://images.unsplash.com/photo-1615800098779-1be4350c5957?q=80&w=1000&auto=format&fit=crop',\n    images: ['https://images.unsplash.com/photo-1615800098779-1be4350c5957?q=80&w=1000&auto=format&fit=crop'],\n    shortDescription: 'Ajoutez une touche d\\'élégance royale à votre intérieur.',\n    description: 'Papier peint texturé avec motifs damassés classiques.',\n    colors: ['Or/Noir', 'Argent/Blanc'],\n    rating: 4.6,\n    reviews: 34,\n    stockQuantity: 100,\n    inStock: true,\n    tags: ['maison', 'décoration']\n  },\n  {\n    id: '7',\n    name: 'Costume Classique Homme',\n    price: 450.00,\n    originalPrice: 599.00,\n    categories: ['Hommes', 'Chaussures'],\n    image: 'https://images.unsplash.com/photo-1593030761757-71fae45fa2e7?q=80&w=1000&auto=format&fit=crop',\n    images: ['https://images.unsplash.com/photo-1593030761757-71fae45fa2e7?q=80&w=1000&auto=format&fit=crop'],\n    shortDescription: 'Costume ajusté pour le gentleman moderne.',\n    description: 'Coupe parfaite et tissu respirant pour un confort toute la journée.',\n    sizes: ['48', '50', '52', '54'],\n    colors: ['Bleu Marine', 'Noir', 'Gris'],\n    rating: 4.9,\n    reviews: 45,\n    stockQuantity: 25,\n    inStock: true,\n    isFeatured: true,\n    tags: ['hommes', 'formel']\n  },\n  {\n    id: '9',\n    name: 'Robe de Soirée Élégante',\n    price: 280.00,\n    categories: ['Femmes'],\n    image: 'https://images.unsplash.com/photo-1566174053879-31528523f8ae?q=80&w=1000&auto=format&fit=crop',\n    images: ['https://images.unsplash.com/photo-1566174053879-31528523f8ae?q=80&w=1000&auto=format&fit=crop'],\n    shortDescription: 'Robe longue éblouissante pour les occasions spéciales.',\n    description: 'Faites tourner les têtes avec cette robe de soirée sophistiquée.',\n    sizes: ['XS', 'S', 'M', 'L'],\n    colors: ['Rouge', 'Noir', 'Émeraude'],\n    rating: 4.8,\n    reviews: 67,\n    stockQuantity: 15,\n    inStock: true,\n    isFeatured: true,\n    tags: ['femmes', 'formel']\n  },\n  {\n    id: '11',\n    name: 'Veste en Jean Enfant',\n    price: 45.00,\n    categories: ['Enfants', 'Vestes'],\n    image: 'https://images.unsplash.com/photo-1519457431-44ccd64a579b?q=80&w=1000&auto=format&fit=crop',\n    images: ['https://images.unsplash.com/photo-1519457431-44ccd64a579b?q=80&w=1000&auto=format&fit=crop'],\n    shortDescription: 'Veste en jean durable et élégante pour les enfants.',\n    description: 'Parfaite pour l\\'école ou les jeux. Résistante et confortable.',\n    sizes: ['4A', '6A', '8A', '10A'],\n    colors: ['Bleu'],\n    rating: 4.7,\n    reviews: 88,\n    stockQuantity: 40,\n    inStock: true,\n    tags: ['enfants', 'décontracté']\n  }\n];\n\ninterface DataContextType {\n  products: Product[];\n  orders: Order[];\n  categories: Category[];\n  addProduct: (product: Product) => Promise<void>;\n  updateProduct: (product: Product) => Promise<void>;\n  deleteProduct: (id: string) => Promise<void>;\n  addOrder: (order: Order) => Promise<void>;\n  updateOrderStatus: (id: string, status: OrderStatus) => Promise<void>;\n  deleteOrder: (id: string) => Promise<void>;\n  addCategory: (category: Category) => Promise<void>;\n  deleteCategory: (id: string) => Promise<void>;\n  refreshData: () => void;\n  seedDatabase: () => Promise<void>;\n  isLoading: boolean;\n}\n\nconst DataContext = createContext<DataContextType | undefined>(undefined);\n\nexport const DataProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  const [products, setProducts] = useState<Product[]>([]);\n  const [orders, setOrders] = useState<Order[]>([]);\n  const [categories, setCategories] = useState<Category[]>([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  const refreshData = async () => {\n    setIsLoading(true);\n    try {\n      // Fetch Products\n      // Note: We keep created_at for products if it exists, or it might need change too if products fail.\n      // But user specifically asked for orders fix.\n      const { data: prodData } = await supabase.from('products').select('*').order('created_at', { ascending: false });\n      if (prodData) {\n        const mappedProducts: Product[] = prodData.map(p => ({\n          id: p.id,\n          name: p.name,\n          slug: p.slug || slugify(p.name),\n          price: Number(p.price),\n          originalPrice: p.original_price ? Number(p.original_price) : undefined,\n          categories: p.categories || [p.category].filter(Boolean) || [],\n          image: p.image,\n          images: p.images || [],\n          shortDescription: p.short_description,\n          description: p.description,\n          sizes: p.sizes,\n          colors: p.colors,\n          inStock: p.in_stock,\n          isFeatured: p.is_featured,\n          isBestSeller: p.is_best_seller,\n          isNew: p.is_new,\n          rating: Number(p.rating),\n          reviews: Number(p.reviews),\n          stockQuantity: Number(p.stock_quantity),\n          tags: p.tags\n        }));\n        setProducts(mappedProducts);\n      }\n\n      // Fetch Orders\n      // CHANGED: Sorting by 'date' instead of 'created_at' because 'created_at' might be missing in schema\n      const { data: orderData } = await supabase.from('orders').select('*').order('date', { ascending: false });\n      if (orderData) {\n        const mappedOrders: Order[] = orderData.map(o => {\n          // Robustly construct customer object from both JSON column and flat columns\n          const customerData = {\n            name: o.customer?.name || o.customer_name || 'Client Inconnu',\n            phone: o.customer?.phone || o.customer_phone || '',\n            address: o.customer?.address || o.customer_address || '',\n            city: o.customer?.city || o.customer_city || '',\n            notes: o.customer?.notes || ''\n          };\n\n          return {\n            id: o.id,\n            items: o.items || [],\n            total: Number(o.total),\n            customer: customerData,\n            date: o.date || o.created_at,\n            status: o.status\n          };\n        });\n        setOrders(mappedOrders);\n      }\n\n      // Fetch Categories\n      const { data: catData } = await supabase.from('categories').select('*');\n      if (catData && catData.length > 0) {\n        setCategories(catData);\n      } else {\n        setCategories([]);\n      }\n\n    } catch (error) {\n      console.error('Error fetching data:', error);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    refreshData();\n  }, []);\n\n  const addProduct = async (product: Product) => {\n    const existingSlugs = products.map(p => p.slug || slugify(p.name));\n    let slug = generateUniqueSlug(product.name, existingSlugs);\n\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    const { id, ...rest } = product;\n    const dbProduct = {\n      name: product.name,\n      slug: slug,\n      price: product.price,\n      original_price: product.originalPrice,\n      categories: product.categories,\n      category: product.categories[0] || '',\n      image: product.image,\n      images: product.images,\n      short_description: product.shortDescription,\n      description: product.description,\n      sizes: product.sizes,\n      colors: product.colors,\n      in_stock: product.inStock,\n      is_featured: product.isFeatured,\n      is_best_seller: product.isBestSeller,\n      stock_quantity: product.stockQuantity,\n      rating: product.rating,\n      reviews: product.reviews\n    };\n\n    let { error } = await supabase.from('products').insert([dbProduct]);\n\n    if (error && error.code === '23505' && error.message?.includes('slug')) {\n      const newSlug = `${slug}-${Math.floor(Math.random() * 10000)}`;\n      dbProduct.slug = newSlug;\n      const retryResult = await supabase.from('products').insert([dbProduct]);\n      error = retryResult.error;\n    }\n\n    if (!error) {\n      refreshData();\n    } else {\n      console.error(\"Error adding product:\", error);\n      throw error;\n    }\n  };\n\n  const updateProduct = async (product: Product) => {\n    const dbProduct = {\n      name: product.name,\n      price: product.price,\n      original_price: product.originalPrice,\n      categories: product.categories,\n      category: product.categories[0] || '',\n      image: product.image,\n      images: product.images,\n      short_description: product.shortDescription,\n      description: product.description,\n      sizes: product.sizes,\n      colors: product.colors,\n      in_stock: product.inStock,\n      is_featured: product.isFeatured,\n      is_best_seller: product.isBestSeller,\n      stock_quantity: product.stockQuantity\n    };\n\n    const { error } = await supabase.from('products').update(dbProduct).eq('id', product.id);\n    if (!error) refreshData();\n  };\n\n  const deleteProduct = async (id: string) => {\n    const { error } = await supabase.from('products').delete().eq('id', id);\n    if (!error) refreshData();\n  };\n\n  const addOrder = async (order: Order) => {\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    const { id, ...rest } = order;\n    const { error } = await supabase.from('orders').insert([{\n      items: order.items,\n      total: order.total,\n      customer: order.customer,\n      customer_name: order.customer.name, // Explicitly add customer_name to satisfy DB constraint\n      customer_phone: order.customer.phone, // Explicitly add customer_phone to satisfy DB constraint\n      customer_address: order.customer.address, // Explicitly add customer_address to satisfy DB constraint\n      customer_city: order.customer.city, // Explicitly add customer_city to satisfy DB constraint\n      status: order.status,\n      date: order.date\n    }]);\n\n    if (error) {\n      console.error(\"Error adding order:\", error);\n      throw error;\n    }\n\n    refreshData();\n  };\n\n  const updateOrderStatus = async (id: string, status: OrderStatus) => {\n    const { error } = await supabase.from('orders').update({ status }).eq('id', id);\n    if (!error) refreshData();\n  };\n\n  const deleteOrder = async (id: string) => {\n    const { error } = await supabase.from('orders').delete().eq('id', id);\n    if (!error) refreshData();\n  };\n\n  const addCategory = async (category: Category) => {\n    const { error } = await supabase.from('categories').insert([category]);\n    if (!error) refreshData();\n  };\n\n  const deleteCategory = async (id: string) => {\n    const { error } = await supabase.from('categories').delete().eq('id', id);\n    if (!error) refreshData();\n  };\n\n  const seedDatabase = async () => {\n    setIsLoading(true);\n    try {\n      // 1. Seed Categories - SKIPPED AS REQUESTED\n      // Categories must be added manually by the admin.\n\n      // 2. Seed Products\n      const { count } = await supabase.from('products').select('*', { count: 'exact', head: true });\n\n      if (count === 0) {\n        const dbProducts = [];\n        const usedSlugs: string[] = [];\n\n        for (const p of initialProducts) {\n          const slug = generateUniqueSlug(p.name, usedSlugs);\n          usedSlugs.push(slug);\n\n          dbProducts.push({\n            name: p.name,\n            slug: slug,\n            price: p.price,\n            original_price: p.originalPrice,\n            categories: p.categories,\n            category: p.categories[0],\n            image: p.image,\n            images: p.images,\n            short_description: p.shortDescription,\n            description: p.description,\n            sizes: p.sizes,\n            colors: p.colors,\n            in_stock: p.inStock,\n            is_featured: p.isFeatured,\n            is_best_seller: false,\n            is_new: p.isNew,\n            rating: p.rating,\n            reviews: p.reviews,\n            stock_quantity: p.stockQuantity,\n            tags: p.tags\n          });\n        }\n\n        const { error } = await supabase.from('products').insert(dbProducts);\n        if (error) console.error('Error seeding products:', error);\n      }\n\n      await refreshData();\n    } catch (err) {\n      console.error(\"Seeding failed\", err);\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  return (\n    <DataContext.Provider value={{\n      products, orders, categories,\n      addProduct, updateProduct, deleteProduct,\n      addOrder, updateOrderStatus, deleteOrder,\n      addCategory, deleteCategory,\n      refreshData, seedDatabase, isLoading\n    }}>\n      {children}\n    </DataContext.Provider>\n  );\n};\n\nexport const useData = () => {\n  const context = useContext(DataContext);\n  if (!context) throw new Error('useData must be used within a DataProvider');\n  return context;\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 771, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/chlgh/OneDrive/Desktop/bigstock/src/context/AuthContext.tsx"],"sourcesContent":["'use client';\n\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport { supabase } from '../lib/supabase';\n\ninterface AuthContextType {\n  isAuthenticated: boolean;\n  login: (email: string, pass: string, remember: boolean) => Promise<boolean>;\n  logout: () => void;\n  updateCredentials: (email: string, pass: string) => Promise<void>;\n  adminEmail: string;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nexport const AuthProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  // Initialize directly from storage to prevent redirect loop on refresh\n  const [isAuthenticated, setIsAuthenticated] = useState(() => {\n    const authLocal = localStorage.getItem('admin_auth');\n    const authSession = sessionStorage.getItem('admin_auth');\n    return authLocal === 'true' || authSession === 'true';\n  });\n\n  const [adminEmail, setAdminEmail] = useState('admin@luxe.com');\n\n  useEffect(() => {\n    // Fetch current admin email for display purposes\n    fetchAdminEmail();\n  }, []);\n\n  const fetchAdminEmail = async () => {\n    try {\n      const { data } = await supabase\n        .from('app_settings')\n        .select('value')\n        .eq('key', 'admin_email')\n        .single();\n\n      if (data) {\n        setAdminEmail(data.value);\n      }\n    } catch (error) {\n      console.error(\"Error fetching admin email:\", error);\n    }\n  };\n\n  const login = async (email: string, pass: string, remember: boolean) => {\n    try {\n      // Fetch credentials from DB\n      const { data: emailData } = await supabase\n        .from('app_settings')\n        .select('value')\n        .eq('key', 'admin_email')\n        .single();\n\n      const { data: passData } = await supabase\n        .from('app_settings')\n        .select('value')\n        .eq('key', 'admin_password')\n        .single();\n\n      const dbEmail = emailData?.value || 'admin@luxe.com';\n      const dbPass = passData?.value || 'admin123';\n\n      if (email === dbEmail && pass === dbPass) {\n        setIsAuthenticated(true);\n        setAdminEmail(dbEmail);\n\n        if (remember) {\n          localStorage.setItem('admin_auth', 'true');\n        } else {\n          sessionStorage.setItem('admin_auth', 'true');\n        }\n        return true;\n      }\n      return false;\n    } catch (error) {\n      console.error(\"Login error:\", error);\n      // Fallback to hardcoded if DB fails (safety net)\n      if (email === 'admin@luxe.com' && pass === 'admin123') {\n        setIsAuthenticated(true);\n        return true;\n      }\n      return false;\n    }\n  };\n\n  const logout = () => {\n    setIsAuthenticated(false);\n    localStorage.removeItem('admin_auth');\n    sessionStorage.removeItem('admin_auth');\n  };\n\n  const updateCredentials = async (email: string, pass: string) => {\n    try {\n      // Update Email\n      const { error: emailError } = await supabase\n        .from('app_settings')\n        .upsert({ key: 'admin_email', value: email });\n\n      // Update Password\n      const { error: passError } = await supabase\n        .from('app_settings')\n        .upsert({ key: 'admin_password', value: pass });\n\n      if (emailError || passError) throw new Error(\"Failed to update credentials\");\n\n      setAdminEmail(email);\n    } catch (error) {\n      console.error(\"Error updating credentials:\", error);\n      throw error;\n    }\n  };\n\n  return (\n    <AuthContext.Provider value={{ isAuthenticated, login, logout, updateCredentials, adminEmail }}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\nexport const useAuth = () => {\n  const context = useContext(AuthContext);\n  if (!context) throw new Error('useAuth must be used within a AuthProvider');\n  return context;\n};\n"],"names":[],"mappings":";;;;;;;AAEA;AACA;;;AAHA;;;AAaA,MAAM,4BAAc,IAAA,8KAAa,EAA8B;AAExD,MAAM,eAAwD,CAAC,EAAE,QAAQ,EAAE;;IAChF,uEAAuE;IACvE,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,yKAAQ;iCAAC;YACrD,MAAM,YAAY,aAAa,OAAO,CAAC;YACvC,MAAM,cAAc,eAAe,OAAO,CAAC;YAC3C,OAAO,cAAc,UAAU,gBAAgB;QACjD;;IAEA,MAAM,CAAC,YAAY,cAAc,GAAG,IAAA,yKAAQ,EAAC;IAE7C,IAAA,0KAAS;kCAAC;YACR,iDAAiD;YACjD;QACF;iCAAG,EAAE;IAEL,MAAM,kBAAkB;QACtB,IAAI;YACF,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,qIAAQ,CAC5B,IAAI,CAAC,gBACL,MAAM,CAAC,SACP,EAAE,CAAC,OAAO,eACV,MAAM;YAET,IAAI,MAAM;gBACR,cAAc,KAAK,KAAK;YAC1B;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,+BAA+B;QAC/C;IACF;IAEA,MAAM,QAAQ,OAAO,OAAe,MAAc;QAChD,IAAI;YACF,4BAA4B;YAC5B,MAAM,EAAE,MAAM,SAAS,EAAE,GAAG,MAAM,qIAAQ,CACvC,IAAI,CAAC,gBACL,MAAM,CAAC,SACP,EAAE,CAAC,OAAO,eACV,MAAM;YAET,MAAM,EAAE,MAAM,QAAQ,EAAE,GAAG,MAAM,qIAAQ,CACtC,IAAI,CAAC,gBACL,MAAM,CAAC,SACP,EAAE,CAAC,OAAO,kBACV,MAAM;YAET,MAAM,UAAU,WAAW,SAAS;YACpC,MAAM,SAAS,UAAU,SAAS;YAElC,IAAI,UAAU,WAAW,SAAS,QAAQ;gBACxC,mBAAmB;gBACnB,cAAc;gBAEd,IAAI,UAAU;oBACZ,aAAa,OAAO,CAAC,cAAc;gBACrC,OAAO;oBACL,eAAe,OAAO,CAAC,cAAc;gBACvC;gBACA,OAAO;YACT;YACA,OAAO;QACT,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,gBAAgB;YAC9B,iDAAiD;YACjD,IAAI,UAAU,oBAAoB,SAAS,YAAY;gBACrD,mBAAmB;gBACnB,OAAO;YACT;YACA,OAAO;QACT;IACF;IAEA,MAAM,SAAS;QACb,mBAAmB;QACnB,aAAa,UAAU,CAAC;QACxB,eAAe,UAAU,CAAC;IAC5B;IAEA,MAAM,oBAAoB,OAAO,OAAe;QAC9C,IAAI;YACF,eAAe;YACf,MAAM,EAAE,OAAO,UAAU,EAAE,GAAG,MAAM,qIAAQ,CACzC,IAAI,CAAC,gBACL,MAAM,CAAC;gBAAE,KAAK;gBAAe,OAAO;YAAM;YAE7C,kBAAkB;YAClB,MAAM,EAAE,OAAO,SAAS,EAAE,GAAG,MAAM,qIAAQ,CACxC,IAAI,CAAC,gBACL,MAAM,CAAC;gBAAE,KAAK;gBAAkB,OAAO;YAAK;YAE/C,IAAI,cAAc,WAAW,MAAM,IAAI,MAAM;YAE7C,cAAc;QAChB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,+BAA+B;YAC7C,MAAM;QACR;IACF;IAEA,qBACE,6LAAC,YAAY,QAAQ;QAAC,OAAO;YAAE;YAAiB;YAAO;YAAQ;YAAmB;QAAW;kBAC1F;;;;;;AAGP;GAxGa;KAAA;AA0GN,MAAM,UAAU;;IACrB,MAAM,UAAU,IAAA,2KAAU,EAAC;IAC3B,IAAI,CAAC,SAAS,MAAM,IAAI,MAAM;IAC9B,OAAO;AACT;IAJa"}},
    {"offset": {"line": 898, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/chlgh/OneDrive/Desktop/bigstock/src/utils/cn.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx';\nimport { twMerge } from 'tailwind-merge';\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs));\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,yKAAO,EAAC,IAAA,gJAAI,EAAC;AACtB"}},
    {"offset": {"line": 916, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/chlgh/OneDrive/Desktop/bigstock/src/components/ui/Button.tsx"],"sourcesContent":["import React from 'react';\nimport { cn } from '../../utils/cn';\n\ninterface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n  variant?: 'primary' | 'secondary' | 'outline' | 'ghost';\n  size?: 'sm' | 'md' | 'lg';\n  fullWidth?: boolean;\n}\n\nexport const Button: React.FC<ButtonProps> = ({ \n  children, \n  className, \n  variant = 'primary', \n  size = 'md', \n  fullWidth = false,\n  ...props \n}) => {\n  const baseStyles = \"inline-flex items-center justify-center font-medium transition-all duration-300 focus:outline-none disabled:opacity-50 disabled:cursor-not-allowed\";\n  \n  const variants = {\n    primary: \"bg-accent text-white hover:bg-accent-hover shadow-md hover:shadow-lg\",\n    secondary: \"bg-primary text-white hover:bg-gray-800\",\n    outline: \"border-2 border-accent text-accent hover:bg-accent hover:text-white\",\n    ghost: \"text-primary hover:bg-gray-100\"\n  };\n\n  const sizes = {\n    sm: \"text-xs px-4 py-2 rounded-sm\",\n    md: \"text-sm px-6 py-3 rounded-md\",\n    lg: \"text-base px-8 py-4 rounded-md\"\n  };\n\n  return (\n    <button \n      className={cn(\n        baseStyles, \n        variants[variant], \n        sizes[size], \n        fullWidth ? \"w-full\" : \"\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </button>\n  );\n};\n"],"names":[],"mappings":";;;;;AACA;;;AAQO,MAAM,SAAgC,CAAC,EAC5C,QAAQ,EACR,SAAS,EACT,UAAU,SAAS,EACnB,OAAO,IAAI,EACX,YAAY,KAAK,EACjB,GAAG,OACJ;IACC,MAAM,aAAa;IAEnB,MAAM,WAAW;QACf,SAAS;QACT,WAAW;QACX,SAAS;QACT,OAAO;IACT;IAEA,MAAM,QAAQ;QACZ,IAAI;QACJ,IAAI;QACJ,IAAI;IACN;IAEA,qBACE,6LAAC;QACC,WAAW,IAAA,2HAAE,EACX,YACA,QAAQ,CAAC,QAAQ,EACjB,KAAK,CAAC,KAAK,EACX,YAAY,WAAW,IACvB;QAED,GAAG,KAAK;kBAER;;;;;;AAGP;KArCa"}},
    {"offset": {"line": 957, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/chlgh/OneDrive/Desktop/bigstock/src/components/cart/CartDrawer.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { useRouter } from 'next/navigation';\nimport { X, Minus, Plus, Trash2 } from 'lucide-react';\nimport { useCart } from '../../context/CartContext';\nimport { Button } from '../ui/Button';\nimport { motion, AnimatePresence } from 'framer-motion';\n\nexport const CartDrawer: React.FC = () => {\n  const { cart, isCartOpen, setIsCartOpen, removeFromCart, updateQuantity, cartTotal } = useCart();\n  const router = useRouter();\n\n  const handleCheckout = () => {\n    setIsCartOpen(false);\n    router.push('/checkout');\n  };\n\n  return (\n    <AnimatePresence>\n      {isCartOpen && (\n        <>\n          <motion.div\n            initial={{ opacity: 0 }}\n            animate={{ opacity: 1 }}\n            exit={{ opacity: 0 }}\n            onClick={() => setIsCartOpen(false)}\n            className=\"fixed inset-0 bg-black/50 z-50 backdrop-blur-sm\"\n          />\n\n          <motion.div\n            initial={{ x: '100%' }}\n            animate={{ x: 0 }}\n            exit={{ x: '100%' }}\n            transition={{ type: 'spring', damping: 25, stiffness: 200 }}\n            className=\"fixed inset-y-0 right-0 z-50 w-full max-w-md bg-white shadow-2xl flex flex-col\"\n          >\n            <div className=\"flex items-center justify-between p-6 border-b border-gray-100\">\n              <h2 className=\"text-xl font-serif font-bold text-primary\">Panier ({cart.length})</h2>\n              <button\n                onClick={() => setIsCartOpen(false)}\n                className=\"text-gray-400 hover:text-primary transition-colors\"\n              >\n                <X size={24} />\n              </button>\n            </div>\n\n            <div className=\"flex-1 overflow-y-auto p-6 space-y-6\">\n              {cart.length === 0 ? (\n                <div className=\"flex flex-col items-center justify-center h-full text-gray-400\">\n                  <p className=\"mb-4\">Votre panier est vide</p>\n                  <Button variant=\"outline\" onClick={() => setIsCartOpen(false)}>Continuer vos achats</Button>\n                </div>\n              ) : (\n                cart.map((item) => (\n                  <div key={`${item.id}-${item.selectedSize}-${item.selectedColor}`} className=\"flex gap-4\">\n                    {/* STRICTLY FIT CONTENT */}\n                    <div className=\"w-20 h-24 flex-shrink-0 bg-gray-100 rounded-md overflow-hidden flex items-center justify-center p-1 border border-gray-100\">\n                      <img src={item.image} alt={item.name} className=\"w-full h-full object-contain object-center\" />\n                    </div>\n                    <div className=\"flex-1 flex flex-col justify-between\">\n                      <div>\n                        <h3 className=\"text-sm font-medium text-primary line-clamp-1\">{item.name}</h3>\n                        <p className=\"text-xs text-gray-500 mt-1\">\n                          {item.selectedSize && `Taille: ${item.selectedSize}`}\n                          {item.selectedSize && item.selectedColor && ' | '}\n                          {item.selectedColor && `Couleur: ${item.selectedColor}`}\n                        </p>\n                      </div>\n                      <div className=\"flex items-center justify-between mt-2\">\n                        <div className=\"flex items-center border border-gray-200 rounded-md\">\n                          <button\n                            onClick={() => updateQuantity(item.id, item.quantity - 1)}\n                            className=\"p-1 hover:bg-gray-50 text-gray-500\"\n                            disabled={item.quantity <= 1}\n                          >\n                            <Minus size={14} />\n                          </button>\n                          <span className=\"px-2 text-sm font-medium\">{item.quantity}</span>\n                          <button\n                            onClick={() => updateQuantity(item.id, item.quantity + 1)}\n                            className=\"p-1 hover:bg-gray-50 text-gray-500\"\n                          >\n                            <Plus size={14} />\n                          </button>\n                        </div>\n                        <div className=\"flex items-center gap-3\">\n                          <span className=\"text-sm font-bold text-accent\">{(item.price * item.quantity).toFixed(2)} MAD</span>\n                          <button\n                            onClick={() => removeFromCart(item.id)}\n                            className=\"text-gray-400 hover:text-red-500 transition-colors\"\n                          >\n                            <Trash2 size={16} />\n                          </button>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                ))\n              )}\n            </div>\n\n            {cart.length > 0 && (\n              <div className=\"p-6 border-t border-gray-100 bg-gray-50\">\n                <div className=\"flex justify-between mb-4 text-sm\">\n                  <span className=\"text-gray-500\">Sous-total</span>\n                  <span className=\"font-bold text-primary\">{cartTotal.toFixed(2)} MAD</span>\n                </div>\n                <div className=\"flex justify-between mb-6 text-sm\">\n                  <span className=\"text-gray-500\">Livraison</span>\n                  <span className=\"text-green-600 font-medium\">Gratuite</span>\n                </div>\n                <div className=\"flex justify-between mb-6 text-lg font-bold\">\n                  <span>Total</span>\n                  <span className=\"text-accent\">{cartTotal.toFixed(2)} MAD</span>\n                </div>\n                <Button fullWidth onClick={handleCheckout}>\n                  Commander\n                </Button>\n                <p className=\"text-center text-xs text-gray-400 mt-3\">\n                  Paiement à la livraison\n                </p>\n              </div>\n            )}\n          </motion.div>\n        </>\n      )}\n    </AnimatePresence>\n  );\n};\n"],"names":[],"mappings":"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"}}]
}