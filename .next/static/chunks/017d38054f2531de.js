(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,46897,e=>{"use strict";let s=(0,e.i(75254).default)("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);e.s(["MapPin",()=>s],46897)},43432,e=>{"use strict";let s=(0,e.i(75254).default)("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]);e.s(["Phone",()=>s],43432)},24013,e=>{"use strict";let s=async(e,s)=>{let t="contact"===e?"https://script.google.com/macros/s/AKfycbzET_XwolFT6KawML1zEsf5Iq7EIxnu-WxDZSAcuK2wvlP35UzG8Ad-aA7KTKiF11RW/exec":"https://script.google.com/macros/s/AKfycbyxlW0-ygoCysCrWxOj84Dce9pu8meEzCSvLOL4fENOr2FoZMOt0OHBm32vEKMWTEKI/exec";if(!t)return console.warn(`Google Script URL for ${e} not found. Data not sent.`),{status:"skipped"};try{let e=new URLSearchParams;return Object.keys(s).forEach(t=>{e.append(t,s[t])}),await fetch(t,{method:"POST",mode:"no-cors",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:e.toString()}),{status:"success"}}catch(e){return console.error("Error submitting to Google Sheets:",e),{status:"error",error:e}}};e.s(["submitToGoogleSheets",0,s])},31278,e=>{"use strict";let s=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>s],31278)},15788,e=>{"use strict";let s=(0,e.i(75254).default)("truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);e.s(["Truck",()=>s],15788)},81418,e=>{"use strict";let s=(0,e.i(75254).default)("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);e.s(["ShieldCheck",()=>s],81418)},69439,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(18566),r=e.i(25194),l=e.i(91427),c=e.i(59544),i=e.i(15788),n=e.i(81418),o=e.i(46897),d=e.i(43432),m=e.i(75254);let x=(0,m.default)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),u=(0,m.default)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);var h=e.i(31278),p=e.i(24013);let g=()=>{let{cart:e,cartTotal:m,clearCart:g}=(0,r.useCart)(),{addOrder:y}=(0,l.useData)(),f=(0,a.useRouter)(),[b,j]=(0,t.useState)(!1),[v,N]=(0,t.useState)(!1),[w,k]=(0,t.useState)({fullName:"",phone:"",address:"",city:"",notes:""});if((0,t.useEffect)(()=>{0!==e.length||v||f.push("/shop")},[e,f,v]),0===e.length&&!v)return null;let z=e=>{k({...w,[e.target.name]:e.target.value})},S=async s=>{s.preventDefault(),j(!0);let t={id:Date.now().toString(),items:e,total:m,customer:{name:w.fullName,phone:w.phone,address:w.address,city:w.city,notes:w.notes},date:new Date().toISOString(),status:"Pending"};try{await y(t);try{await (0,p.submitToGoogleSheets)("order",{orderId:t.id,customerName:t.customer.name,customerPhone:t.customer.phone,customerAddress:`${t.customer.address}, ${t.customer.city}`,total:t.total,items:t.items.map(e=>`${e.name} (${e.quantity}x ${e.selectedSize||""} ${e.selectedColor||""})`).join(", "),date:t.date})}catch(e){console.error("Google Sheets Backup Error:",e)}N(!0),g(),f.push("/order-success")}catch(e){console.error("Checkout Error:",e),alert("Une erreur est survenue lors de la commande. Veuillez vérifier votre connexion et réessayer."),j(!1)}};return(0,s.jsxs)("div",{className:"bg-gray-50 min-h-screen pb-20",children:[(0,s.jsx)("div",{className:"bg-primary text-white py-12 mb-12",children:(0,s.jsxs)("div",{className:"container mx-auto px-4 text-center",children:[(0,s.jsx)("h1",{className:"text-3xl md:text-4xl font-serif font-bold mb-2",children:"Paiement Sécurisé"}),(0,s.jsx)("p",{className:"text-gray-400 text-sm",children:"Complétez votre commande avec le paiement à la livraison"})]})}),(0,s.jsx)("div",{className:"container mx-auto px-4",children:(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8 max-w-6xl mx-auto",children:[(0,s.jsx)("div",{className:"lg:col-span-7",children:(0,s.jsxs)("div",{className:"bg-white p-8 rounded-xl shadow-sm border border-gray-200",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3 mb-8 pb-4 border-b border-gray-100",children:[(0,s.jsx)("div",{className:"w-10 h-10 bg-accent/10 rounded-full flex items-center justify-center text-accent",children:(0,s.jsx)(i.Truck,{size:20})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-xl font-bold text-primary",children:"Informations de Livraison"}),(0,s.jsx)("p",{className:"text-xs text-gray-500",children:"Où devons-nous envoyer votre commande ?"})]})]}),(0,s.jsxs)("form",{id:"checkout-form",onSubmit:S,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("label",{className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[(0,s.jsx)(x,{size:14,className:"text-gray-400"})," Nom Complet"]}),(0,s.jsx)("input",{required:!0,name:"fullName",value:w.fullName,onChange:z,type:"text",className:"w-full px-4 py-3 rounded-lg border border-gray-200 bg-gray-50 focus:bg-white focus:border-accent focus:ring-1 focus:ring-accent outline-none transition-all",placeholder:"Jean Dupont"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("label",{className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[(0,s.jsx)(d.Phone,{size:14,className:"text-gray-400"})," Téléphone"]}),(0,s.jsx)("input",{required:!0,name:"phone",value:w.phone,onChange:z,type:"tel",className:"w-full px-4 py-3 rounded-lg border border-gray-200 bg-gray-50 focus:bg-white focus:border-accent focus:ring-1 focus:ring-accent outline-none transition-all",placeholder:"+212 600-000000"})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("label",{className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[(0,s.jsx)(o.MapPin,{size:14,className:"text-gray-400"})," Adresse"]}),(0,s.jsx)("input",{required:!0,name:"address",value:w.address,onChange:z,type:"text",className:"w-full px-4 py-3 rounded-lg border border-gray-200 bg-gray-50 focus:bg-white focus:border-accent focus:ring-1 focus:ring-accent outline-none transition-all",placeholder:"123 Avenue de la Mode, Apt 4B"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("label",{className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[(0,s.jsx)(o.MapPin,{size:14,className:"text-gray-400"})," Ville"]}),(0,s.jsx)("input",{required:!0,name:"city",value:w.city,onChange:z,type:"text",className:"w-full px-4 py-3 rounded-lg border border-gray-200 bg-gray-50 focus:bg-white focus:border-accent focus:ring-1 focus:ring-accent outline-none transition-all",placeholder:"Casablanca"})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("label",{className:"text-sm font-medium text-gray-700 flex items-center gap-2",children:[(0,s.jsx)(u,{size:14,className:"text-gray-400"})," Notes (Optionnel)"]}),(0,s.jsx)("textarea",{name:"notes",value:w.notes,onChange:z,rows:3,className:"w-full px-4 py-3 rounded-lg border border-gray-200 bg-gray-50 focus:bg-white focus:border-accent focus:ring-1 focus:ring-accent outline-none transition-all resize-none",placeholder:"Instructions spéciales pour la livraison..."})]})]})]})}),(0,s.jsx)("div",{className:"lg:col-span-5",children:(0,s.jsxs)("div",{className:"bg-white p-8 rounded-xl shadow-lg border border-gray-100 sticky top-24",children:[(0,s.jsx)("h2",{className:"text-xl font-bold mb-6 pb-4 border-b border-gray-100",children:"Récapitulatif"}),(0,s.jsx)("div",{className:"space-y-4 mb-8 max-h-[300px] overflow-y-auto pr-2 custom-scrollbar",children:e.map(e=>(0,s.jsxs)("div",{className:"flex gap-4 group",children:[(0,s.jsx)("div",{className:"w-16 h-16 bg-gray-100 rounded-md overflow-hidden border border-gray-200 flex-shrink-0 flex items-center justify-center p-1",children:(0,s.jsx)("img",{src:e.image,alt:e.name,className:"w-full h-full object-contain object-center"})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h4",{className:"text-sm font-medium text-primary truncate",children:e.name}),(0,s.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Qté: ",e.quantity,e.selectedSize&&(0,s.jsx)("span",{className:"mx-1",children:"•"}),e.selectedSize&&`Taille: ${e.selectedSize}`]})]}),(0,s.jsxs)("div",{className:"font-bold text-sm text-primary",children:[(e.price*e.quantity).toFixed(2)," MAD"]})]},`${e.id}-${e.selectedSize}-${e.selectedColor}`))}),(0,s.jsxs)("div",{className:"space-y-3 pt-4 border-t border-gray-100 bg-gray-50/50 -mx-8 px-8 pb-6 mb-6",children:[(0,s.jsxs)("div",{className:"flex justify-between text-sm pt-4",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Sous-total"}),(0,s.jsxs)("span",{className:"font-medium text-primary",children:[m.toFixed(2)," MAD"]})]}),(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-gray-600",children:"Livraison"}),(0,s.jsxs)("span",{className:"text-green-600 font-bold flex items-center gap-1",children:[(0,s.jsx)(n.ShieldCheck,{size:14})," Gratuite"]})]}),(0,s.jsxs)("div",{className:"flex justify-between text-xl font-bold pt-4 mt-2 border-t border-gray-200",children:[(0,s.jsx)("span",{children:"Total"}),(0,s.jsxs)("span",{className:"text-accent",children:[m.toFixed(2)," MAD"]})]})]}),(0,s.jsx)(c.Button,{type:"submit",form:"checkout-form",fullWidth:!0,size:"lg",disabled:b,className:"text-base sm:text-lg font-bold py-4 shadow-xl hover:shadow-2xl transition-all transform hover:-translate-y-1 flex items-center justify-center gap-2 whitespace-nowrap",children:b?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.Loader2,{className:"animate-spin",size:20})," Traitement..."]}):"Commander Maintenant"}),(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2 mt-4 text-xs text-gray-500 bg-gray-50 py-2 rounded-lg",children:[(0,s.jsx)(i.Truck,{size:14,className:"text-accent"}),(0,s.jsx)("span",{children:"Paiement à la livraison"})]})]})})]})})]})};function y(){return(0,s.jsx)(g,{})}e.s(["default",()=>y],69439)}]);