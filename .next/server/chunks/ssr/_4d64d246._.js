module.exports=[16201,a=>{"use strict";let b=(0,a.i(70106).default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);a.s(["CheckCircle",()=>b],16201)},96221,a=>{"use strict";let b=(0,a.i(70106).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);a.s(["Loader2",()=>b],96221)},33441,a=>{"use strict";let b=(0,a.i(70106).default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);a.s(["Check",()=>b],33441)},87487,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(56025),e=a.i(8680),f=a.i(96438),g=a.i(70106);let h=(0,g.default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),i=(0,g.default)("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);var j=a.i(16201);let k=(0,g.default)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),l=(0,g.default)("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);var m=a.i(15618),n=a.i(81560);let o=(0,g.default)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);var p=a.i(33508),q=a.i(33441),r=a.i(96221);let s=()=>{let{adminEmail:a,updateCredentials:g}=(0,d.useAuth)(),{seedDatabase:s,isLoading:t}=(0,e.useData)(),[u,v]=(0,c.useState)(a),[w,x]=(0,c.useState)(""),[y,z]=(0,c.useState)(""),[A,B]=(0,c.useState)("idle"),[C,D]=(0,c.useState)(!1),[E,F]=(0,c.useState)(!1),G=(0,c.useRef)(null),[H,I]=(0,c.useState)(""),[J,K]=(0,c.useState)([]),[L,M]=(0,c.useState)([]),[N,O]=(0,c.useState)(""),[P,Q]=(0,c.useState)(""),[R,S]=(0,c.useState)(null);(0,c.useEffect)(()=>{v(a)},[a]),(0,c.useEffect)(()=>((async()=>{try{let[a,b,c]=await Promise.all([fetch("/api/settings?key=ga_id"),fetch("/api/settings?key=pixel_ids"),fetch("/api/settings?key=tiktok_ids")]),d=await a.json(),e=await b.json(),f=await c.json();d?.value&&I(d.value),e?.value&&K(e.value),f?.value&&M(f.value)}catch(a){console.error("Failed to load analytics settings:",a)}})(),()=>{G.current&&clearTimeout(G.current)}),[]);let T=(a,b=!1)=>{z(a),G.current&&clearTimeout(G.current),G.current=setTimeout(()=>z(""),3e3)},U=async a=>{if(a.preventDefault(),u&&w){D(!0);try{await g(u,w),T("Identifiants mis à jour avec succès !"),x("")}catch(a){T("Erreur lors de la mise à jour.",!0)}finally{D(!1)}}},V=async a=>{a.preventDefault(),F(!0);try{await Promise.all([fetch("/api/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:"ga_id",value:H})}),fetch("/api/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:"pixel_ids",value:J})}),fetch("/api/settings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:"tiktok_ids",value:L})})]),T("Paramètres analytiques enregistrés ! Rafraîchissez pour appliquer.")}catch(a){console.error("Failed to save analytics settings:",a),T("Erreur lors de la sauvegarde.",!0)}finally{F(!1)}},W=()=>{if(R){if("pixel"===R.type){let a=[...J];a[R.index]=R.value,K(a)}else{let a=[...L];a[R.index]=R.value,M(a)}S(null)}},X=()=>{S(null)},Y=async()=>{if(window.confirm("Cela remplira la base de données avec les produits de démonstration. Aucune catégorie ne sera créée (vous devez les ajouter manuellement). Continuer ?"))try{await s(),B("success"),G.current&&clearTimeout(G.current),G.current=setTimeout(()=>B("idle"),3e3)}catch(a){B("error")}};return(0,b.jsxs)("div",{className:"max-w-3xl",children:[(0,b.jsx)("h1",{className:"text-2xl font-bold text-primary mb-8",children:"Paramètres Admin"}),y&&(0,b.jsxs)("div",{className:"fixed top-4 right-4 z-50 bg-green-50 text-green-600 text-sm p-4 rounded-md shadow-lg border border-green-100 flex items-center gap-2 animate-in slide-in-from-right",children:[(0,b.jsx)(j.CheckCircle,{size:16})," ",y]}),(0,b.jsxs)("div",{className:"space-y-8",children:[(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 p-6",children:[(0,b.jsxs)("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[(0,b.jsx)(l,{size:20,className:"text-accent"})," Intégration Analytique"]}),(0,b.jsx)("p",{className:"text-gray-600 text-sm mb-6",children:"Gérez vos pixels de suivi ici. Vous pouvez ajouter, modifier ou supprimer plusieurs pixels pour Meta et TikTok."}),(0,b.jsxs)("form",{onSubmit:V,className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Google Analytics 4 (ID de mesure)"}),(0,b.jsx)("input",{type:"text",value:H,onChange:a=>I(a.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:border-accent outline-none",placeholder:"G-XXXXXXXXXX"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Meta Pixel IDs (Facebook)"}),(0,b.jsx)("div",{className:"space-y-2 mb-2",children:J.map((a,c)=>(0,b.jsx)("div",{className:"flex items-center justify-between bg-gray-50 px-3 py-2 rounded-md border border-gray-200",children:R?.type==="pixel"&&R.index===c?(0,b.jsxs)("div",{className:"flex items-center gap-2 w-full",children:[(0,b.jsx)("input",{type:"text",value:R.value,onChange:a=>S({...R,value:a.target.value}),className:"flex-1 px-2 py-1 text-sm border border-accent rounded outline-none"}),(0,b.jsx)("button",{type:"button",onClick:W,className:"text-green-600",children:(0,b.jsx)(q.Check,{size:16})}),(0,b.jsx)("button",{type:"button",onClick:X,className:"text-gray-500",children:(0,b.jsx)(p.X,{size:16})})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:"text-sm font-mono text-gray-700",children:a}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{type:"button",onClick:()=>{S({type:"pixel",index:c,value:J[c]})},className:"text-blue-500 hover:text-blue-700",children:(0,b.jsx)(o,{size:16})}),(0,b.jsx)("button",{type:"button",onClick:()=>{let a;(a=[...J]).splice(c,1),K(a)},className:"text-red-500 hover:text-red-700",children:(0,b.jsx)(n.Trash2,{size:16})})]})]})},c))}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("input",{type:"text",value:N,onChange:a=>O(a.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-md focus:border-accent outline-none text-sm",placeholder:"Ajouter un ID Meta Pixel"}),(0,b.jsx)("button",{type:"button",onClick:()=>{N&&!J.includes(N)&&(K([...J,N]),O(""))},className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-2 rounded-md",children:(0,b.jsx)(m.Plus,{size:20})})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"TikTok Pixel IDs"}),(0,b.jsx)("div",{className:"space-y-2 mb-2",children:L.map((a,c)=>(0,b.jsx)("div",{className:"flex items-center justify-between bg-gray-50 px-3 py-2 rounded-md border border-gray-200",children:R?.type==="tiktok"&&R.index===c?(0,b.jsxs)("div",{className:"flex items-center gap-2 w-full",children:[(0,b.jsx)("input",{type:"text",value:R.value,onChange:a=>S({...R,value:a.target.value}),className:"flex-1 px-2 py-1 text-sm border border-accent rounded outline-none"}),(0,b.jsx)("button",{type:"button",onClick:W,className:"text-green-600",children:(0,b.jsx)(q.Check,{size:16})}),(0,b.jsx)("button",{type:"button",onClick:X,className:"text-gray-500",children:(0,b.jsx)(p.X,{size:16})})]}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("span",{className:"text-sm font-mono text-gray-700",children:a}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{type:"button",onClick:()=>{S({type:"tiktok",index:c,value:L[c]})},className:"text-blue-500 hover:text-blue-700",children:(0,b.jsx)(o,{size:16})}),(0,b.jsx)("button",{type:"button",onClick:()=>{let a;(a=[...L]).splice(c,1),M(a)},className:"text-red-500 hover:text-red-700",children:(0,b.jsx)(n.Trash2,{size:16})})]})]})},c))}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("input",{type:"text",value:P,onChange:a=>Q(a.target.value),className:"flex-1 px-4 py-2 border border-gray-300 rounded-md focus:border-accent outline-none text-sm",placeholder:"Ajouter un ID TikTok Pixel"}),(0,b.jsx)("button",{type:"button",onClick:()=>{P&&!L.includes(P)&&(M([...L,P]),Q(""))},className:"bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-2 rounded-md",children:(0,b.jsx)(m.Plus,{size:20})})]})]}),(0,b.jsx)(f.Button,{type:"submit",variant:"secondary",className:"mt-2",disabled:E,children:E?"Enregistrement...":"Enregistrer les Paramètres"})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 p-6",children:[(0,b.jsxs)("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[(0,b.jsx)(h,{size:20,className:"text-accent"})," Mettre à jour les identifiants"]}),(0,b.jsx)("p",{className:"text-gray-600 text-sm mb-6",children:"Ces identifiants seront mis à jour pour tous les appareils."}),(0,b.jsxs)("form",{onSubmit:U,className:"space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nouvelle Adresse Email"}),(0,b.jsx)("input",{type:"email",required:!0,value:u,onChange:a=>v(a.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:border-accent outline-none"})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nouveau Mot de Passe"}),(0,b.jsx)("input",{type:"text",required:!0,value:w,onChange:a=>x(a.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:border-accent outline-none",placeholder:"Entrez le nouveau mot de passe"})]}),(0,b.jsxs)(f.Button,{type:"submit",className:"flex items-center gap-2",disabled:C,children:[C?(0,b.jsx)(r.Loader2,{className:"animate-spin",size:16}):(0,b.jsx)(h,{size:16}),C?"Enregistrement...":"Enregistrer"]})]})]}),(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 p-6",children:[(0,b.jsxs)("h2",{className:"text-lg font-bold mb-4 flex items-center gap-2",children:[(0,b.jsx)(i,{size:20,className:"text-accent"})," Gestion de la Base de Données"]}),(0,b.jsx)("p",{className:"text-gray-600 text-sm mb-6",children:"Si votre boutique est vide, vous pouvez la remplir avec les produits de démonstration initiaux."}),"success"===A&&(0,b.jsxs)("div",{className:"bg-green-50 text-green-600 text-sm p-3 rounded-md mb-4 border border-green-100 flex items-center gap-2",children:[(0,b.jsx)(j.CheckCircle,{size:16})," Base de données remplie avec succès !"]}),"error"===A&&(0,b.jsxs)("div",{className:"bg-red-50 text-red-600 text-sm p-3 rounded-md mb-4 border border-red-100 flex items-center gap-2",children:[(0,b.jsx)(k,{size:16})," Échec du remplissage de la base de données."]}),(0,b.jsx)(f.Button,{onClick:Y,variant:"outline",className:"flex items-center gap-2",disabled:t,children:t?"Traitement...":"Remplir la BD avec Données Démo"})]})]})]})};function t(){return(0,b.jsx)(s,{})}a.s(["default",()=>t],87487)}];

//# sourceMappingURL=_4d64d246._.js.map